name: SonarCloud Analysis
on:
 push:
   branches:
     - main
jobs:
 sonarcloud-analysis:
   runs-on: ubuntu-latest
   steps:
     - name: Checkout Repository
       uses: actions/checkout@v2
     - name: Set Up Java
       uses: actions/setup-java@v2
       with:
         distribution: 'adopt'
         java-version: '11'
     - name: SonarCloud Scan
       run: |
         ./mvnw sonar:sonar \
           -Dsonar.projectKey=$SONAR_PROJECT_KEY \
           -Dsonar.organization=$SONAR_ORGANIZATION_KEY \
           -Dsonar.host.url=$SONAR_HOST_URL \
           -Dsonar.login=$SONAR_TOKEN
       env:
         SONAR_PROJECT_KEY: ${{ secrets.SONAR_PROJECT_KEY }}
         SONAR_ORGANIZATION_KEY: ${{ secrets.SONAR_ORGANIZATION_KEY }}
         SONAR_HOST_URL: 'https://sonarcloud.io'
         SONAR_TOKEN: ${{ secrets.SONAR_TOKEN }}